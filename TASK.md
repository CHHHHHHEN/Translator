# 程序主要功能描述
1. 当用户在任意可编辑文本输入区域中输入源语言文本后，系统应支持通过预定义的快捷触发方式（例如双击空格键或用户自定义的全局快捷键），即时获取当前已输入的文本内容，调用翻译引擎完成语言转换，并将翻译结果自动回写至原输入位置，以替换原始文本，整个过程应尽量不中断用户的输入流程。 
2. 系统应支持用户在屏幕上选定一个固定的监控区域。在该区域被激活后，系统需持续监测其内容变化情况；当检测到区域内文本内容发生变化时，应自动对该区域进行内容采集与识别，并调用翻译引擎完成翻译处理，将翻译结果以指定形式（如悬浮窗口或覆盖显示）实时呈现给用户，无需用户额外触发操作。
3. 系统应支持用户通过鼠标拖拽的方式在屏幕上框选任意矩形区域，并对所选区域进行即时截图与光学字符识别（OCR）处理，准确提取其中的文本内容，作为后续翻译或其他文本处理流程的输入来源。
4. 系统应支持将大语言模型（Large Language Models, LLMs）作为核心翻译引擎，通过标准化接口接入一种或多种 LLM 服务，对输入文本进行上下文感知的语言翻译；同时应支持通过配置或策略切换不同模型或服务提供方，以满足翻译质量、响应时延及成本控制等不同使用场景的需求。

# 技术选型

## 核心开发语言与运行环境
- Python  
  作为主开发语言，负责整体业务逻辑、模块调度与算法集成。Python 生态在桌面自动化、OCR、LLM 接入及快速原型开发方面成熟稳定，能够显著降低开发与维护成本。

## 图形界面（GUI）
- PySide6（Qt for Python）  
  用于构建跨平台桌面图形界面，支持高质量原生窗口体验、悬浮窗与透明窗口等高级 UI 形态，适用于文本输入、翻译结果展示及区域框选等交互场景。

## 全局输入与快捷键监听
- pynput  
  用于监听全局键盘与鼠标事件，实现双击空格或自定义快捷键触发翻译操作，以及区域框选等交互逻辑。该方案在 Windows 平台具备较好的稳定性与可控性。

## 文本获取与替换机制
- 剪贴板中转方式（Clipboard-based Text Replacement）  
  通过模拟复制与粘贴操作获取当前输入文本并回写翻译结果，以规避不同应用与输入法实现差异带来的兼容性问题，提升整体稳定性。

## 屏幕采集与 OCR 识别
- PaddleOCR  
  作为主要 OCR 引擎，用于对屏幕框选区域或监控区域进行文本识别，具备较高的中英文（及多语言）识别准确率，支持本地离线运行。
- ONNX Runtime  
  用于加速 OCR 及相关模型的推理过程，降低延迟并提升实时翻译场景下的性能表现。

## 区域内容变化检测
- SSIM（Structural Similarity Index Measure）  
  用于对指定屏幕区域的连续截图进行相似度比较，当相似度低于阈值时判定为内容变化，从而触发 OCR 与翻译流程，减少无效计算与请求。

## 翻译引擎与模型接入
- OpenAI-like API 兼容接口  
  通过统一的 API 抽象层接入各类 LLM 翻译服务（如 OpenAI、DeepSeek、Claude 等兼容接口），支持灵活切换模型与服务提供方，便于在翻译质量、响应速度与成本之间进行权衡。

## 架构与扩展性考虑
- 模块化、分层设计  
  将 GUI、输入监听、OCR、变化检测与翻译引擎解耦，便于独立测试、替换实现及后续功能扩展（如本地 LLM、缓存策略、多模型路由等）。
